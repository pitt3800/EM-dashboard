<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì‘ê¸‰ì‹¤ ê²Œì‹œíŒ - í…ŒìŠ¤íŠ¸</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background: #f5f5f5;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .status {
        padding: 10px;
        border-radius: 5px;
        margin: 10px 0;
        font-weight: bold;
      }
      .status.loading {
        background: #fff3cd;
        color: #856404;
      }
      .status.success {
        background: #d1edff;
        color: #0c5460;
      }
      .status.error {
        background: #f8d7da;
        color: #721c24;
      }
      button {
        background: #007bff;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background: #0056b3;
      }
      .log {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 5px;
        max-height: 300px;
        overflow-y: auto;
        font-family: monospace;
        font-size: 12px;
        white-space: pre-wrap;
      }
      input,
      textarea,
      select {
        width: 100%;
        padding: 8px;
        margin: 5px 0;
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      .form-group {
        margin: 15px 0;
      }
      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ¥ ì‘ê¸‰ì‹¤ ê²Œì‹œíŒ ì‹œìŠ¤í…œ (í…ŒìŠ¤íŠ¸)</h1>

      <div id="status" class="status loading">ì‹œìŠ¤í…œ ì‹œì‘ ì¤‘...</div>

      <div id="logs" class="log">ì‹œìŠ¤í…œ ë¡œê·¸:\n</div>

      <hr />

      <h3>ğŸ“‹ ì—°ê²° í…ŒìŠ¤íŠ¸</h3>
      <button onclick="testConnection()">Google Apps Script ì—°ê²° í…ŒìŠ¤íŠ¸</button>
      <button onclick="loadData()">ë°ì´í„° ë¡œë“œ í…ŒìŠ¤íŠ¸</button>
      <button onclick="showDemo()">ë°ëª¨ ë°ì´í„° í‘œì‹œ</button>

      <hr />

      <h3>ğŸ“ ìƒˆ ê³µì§€ì‚¬í•­ ë“±ë¡</h3>
      <div class="form-group">
        <label>ì§„ë£Œê³¼:</label>
        <select id="department">
          <option value="">ì„ íƒí•˜ì„¸ìš”</option>
          <option value="GI">GI</option>
          <option value="CV">CV</option>
          <option value="DR">DR</option>
          <option value="NS">NS</option>
        </select>
      </div>

      <div class="form-group">
        <label>ì‹œì‘ ë‚ ì§œ:</label>
        <input type="date" id="startDate" />
      </div>

      <div class="form-group">
        <label>ë‚´ìš©:</label>
        <textarea
          id="content"
          rows="4"
          placeholder="ê³µì§€ì‚¬í•­ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"
        ></textarea>
      </div>

      <div class="form-group">
        <label>ì‘ì„±ì (ì„ íƒ):</label>
        <input type="text" id="author" placeholder="ì‘ì„±ìëª…" />
      </div>

      <button onclick="submitNotice()">ê³µì§€ì‚¬í•­ ë“±ë¡</button>

      <hr />

      <h3>ğŸ“‹ ê³µì§€ì‚¬í•­ ëª©ë¡</h3>
      <div id="noticesList">
        <p>ê³µì§€ì‚¬í•­ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
      </div>
    </div>

    <script>
      // ==================== ì„¤ì • ====================
      const GOOGLE_SCRIPT_URL =
        "https://script.google.com/macros/s/AKfycbxgjbtH-vYofGpoCFteL5hiCZ2JKwkVE_ofAqwAvLClSP25CI0W-n-2J36lUMNVJABR/exec";

      let notices = [];

      // ==================== ë¡œê·¸ í•¨ìˆ˜ ====================
      function log(message) {
        console.log(message);
        const logDiv = document.getElementById("logs");
        const timestamp = new Date().toLocaleTimeString();
        logDiv.textContent += `[${timestamp}] ${message}\n`;
        logDiv.scrollTop = logDiv.scrollHeight;
      }

      function setStatus(type, message) {
        const statusDiv = document.getElementById("status");
        statusDiv.className = `status ${type}`;
        statusDiv.textContent = message;
        log(`ìƒíƒœ: ${message}`);
      }

      // ==================== ì´ˆê¸°í™” ====================
      document.addEventListener("DOMContentLoaded", function () {
        log("ğŸ¥ ì‹œìŠ¤í…œ ì‹œì‘ë¨");

        // ì˜¤ëŠ˜ ë‚ ì§œ ì„¤ì •
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("startDate").value = today;

        setStatus("success", "ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ");
        log("âœ… ì´ˆê¸°í™” ì™„ë£Œ - ì—°ê²° í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”");
      });

      // ==================== ì—°ê²° í…ŒìŠ¤íŠ¸ ====================
      async function testConnection() {
        log("ğŸ” Google Apps Script ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹œì‘");
        setStatus("loading", "ì—°ê²° í…ŒìŠ¤íŠ¸ ì¤‘...");

        try {
          log(`ğŸ“¡ ìš”ì²­ URL: ${GOOGLE_SCRIPT_URL}`);

          const formData = new URLSearchParams();
          formData.append("method", "GET");
          formData.append("test", "connection");

          const response = await fetch(GOOGLE_SCRIPT_URL, {
            method: "POST",
            body: formData,
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
          });

          log(`ğŸ“¡ ì‘ë‹µ ìƒíƒœ: ${response.status} ${response.statusText}`);

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }

          const responseText = await response.text();
          log(`ğŸ“„ ì‘ë‹µ ê¸¸ì´: ${responseText.length} ë¬¸ì`);
          log(`ğŸ“„ ì‘ë‹µ ë¯¸ë¦¬ë³´ê¸°: ${responseText.substring(0, 200)}...`);

          const data = JSON.parse(responseText);
          log(`âœ… JSON íŒŒì‹± ì„±ê³µ`);
          log(`ğŸ“Š ì‘ë‹µ ë°ì´í„°: ${JSON.stringify(data, null, 2)}`);

          if (data.success || data.systemStatus) {
            setStatus("success", "ì—°ê²° ì„±ê³µ!");
            log("ğŸ‰ Google Apps Script ì—°ê²° ì„±ê³µ");
          } else {
            throw new Error(data.error || "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜");
          }
        } catch (error) {
          log(`âŒ ì—°ê²° ì‹¤íŒ¨: ${error.message}`);
          setStatus("error", `ì—°ê²° ì‹¤íŒ¨: ${error.message}`);
        }
      }

      // ==================== ë°ì´í„° ë¡œë“œ ====================
      async function loadData() {
        log("ğŸ“‹ ë°ì´í„° ë¡œë“œ ì‹œì‘");
        setStatus("loading", "ë°ì´í„° ë¡œë“œ ì¤‘...");

        try {
          const formData = new URLSearchParams();
          formData.append("method", "GET");

          const response = await fetch(GOOGLE_SCRIPT_URL, {
            method: "POST",
            body: formData,
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
          });

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }

          const data = await response.json();
          log(`ğŸ“Š ë°›ì€ ë°ì´í„°: ${JSON.stringify(data, null, 2)}`);

          if (data.notices) {
            notices = data.notices;
            displayNotices();
            setStatus("success", `${notices.length}ê°œ ê³µì§€ì‚¬í•­ ë¡œë“œë¨`);
          } else {
            throw new Error(data.error || "ë°ì´í„° í˜•ì‹ ì˜¤ë¥˜");
          }
        } catch (error) {
          log(`âŒ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨: ${error.message}`);
          setStatus("error", `ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨: ${error.message}`);
        }
      }

      // ==================== ë°ëª¨ ë°ì´í„° ====================
      function showDemo() {
        log("ğŸ“ ë°ëª¨ ë°ì´í„° í‘œì‹œ");

        const today = new Date().toISOString().split("T")[0];
        notices = [
          {
            id: "demo_1",
            department: "GI",
            startDate: today,
            content: "ë°ëª¨ ê³µì§€ì‚¬í•­ 1ë²ˆì…ë‹ˆë‹¤.\nì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ì¤‘ì…ë‹ˆë‹¤.",
            author: "í…ŒìŠ¤íŠ¸",
            createdAt: new Date().toISOString(),
          },
          {
            id: "demo_2",
            department: "CV",
            startDate: today,
            content:
              "ë°ëª¨ ê³µì§€ì‚¬í•­ 2ë²ˆì…ë‹ˆë‹¤.\ní¸ì§‘ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            author: "ì‹œìŠ¤í…œ",
            createdAt: new Date().toISOString(),
          },
        ];

        displayNotices();
        setStatus("success", "ë°ëª¨ ë°ì´í„° í‘œì‹œë¨");
      }

      // ==================== ê³µì§€ì‚¬í•­ í‘œì‹œ ====================
      function displayNotices() {
        const container = document.getElementById("noticesList");

        if (notices.length === 0) {
          container.innerHTML = "<p>í‘œì‹œí•  ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</p>";
          return;
        }

        let html = "";
        notices.forEach((notice) => {
          const date = new Date(notice.startDate).toLocaleDateString("ko-KR");
          html += `
                    <div style="border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; background: white;" data-id="${
                      notice.id
                    }">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <span style="background: #007bff; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                                ${notice.department}
                            </span>
                            <div>
                                <span style="color: #666; font-size: 12px; margin-right: 10px;">${date}</span>
                                <button onclick="editNotice('${
                                  notice.id
                                }')" style="background: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 11px; margin-right: 5px;">
                                    âœï¸ í¸ì§‘
                                </button>
                                <button onclick="deleteNotice('${
                                  notice.id
                                }')" style="background: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 11px;">
                                    ğŸ—‘ï¸ ì‚­ì œ
                                </button>
                            </div>
                        </div>
                        <div class="notice-content" style="white-space: pre-wrap; line-height: 1.4; cursor: pointer;" onclick="startEdit('${
                          notice.id
                        }')">
                            ${notice.content}
                        </div>
                        ${
                          notice.author
                            ? `<div style="text-align: right; color: #888; font-size: 12px; margin-top: 10px;">ì‘ì„±ì: ${notice.author}</div>`
                            : ""
                        }
                    </div>
                `;
        });

        container.innerHTML = html;
        log(`ğŸ“‹ ${notices.length}ê°œ ê³µì§€ì‚¬í•­ í‘œì‹œ ì™„ë£Œ`);
      }

      // ==================== í¸ì§‘ ê¸°ëŠ¥ ====================
      let editingNoticeId = null;
      let originalContent = "";

      function startEdit(noticeId) {
        if (editingNoticeId) {
          cancelEdit(); // ë‹¤ë¥¸ í¸ì§‘ ì·¨ì†Œ
        }

        const notice = notices.find((n) => n.id === noticeId);
        if (!notice) return;

        editingNoticeId = noticeId;
        originalContent = notice.content;

        const noticeDiv = document.querySelector(`[data-id="${noticeId}"]`);
        const contentDiv = noticeDiv.querySelector(".notice-content");

        // í¸ì§‘ ì˜ì—­ ìƒì„±
        const editContainer = document.createElement("div");
        editContainer.innerHTML = `
                <textarea id="edit-textarea-${noticeId}" style="
                    width: 100%; 
                    min-height: 100px; 
                    border: 2px solid #007bff; 
                    border-radius: 4px; 
                    padding: 8px; 
                    font-family: inherit; 
                    resize: vertical;
                    background: #f8f9fa;
                    margin-bottom: 10px;
                ">${notice.content}</textarea>
                <div style="text-align: right;">
                    <button onclick="saveEdit('${noticeId}')" style="
                        background: #28a745; 
                        color: white; 
                        border: none; 
                        padding: 8px 16px; 
                        border-radius: 4px; 
                        cursor: pointer; 
                        margin-right: 5px;
                        font-weight: bold;
                    ">ğŸ’¾ ì €ì¥</button>
                    <button onclick="cancelEdit()" style="
                        background: #6c757d; 
                        color: white; 
                        border: none; 
                        padding: 8px 16px; 
                        border-radius: 4px; 
                        cursor: pointer;
                    ">âŒ ì·¨ì†Œ</button>
                </div>
                <div style="font-size: 12px; color: #666; margin-top: 5px;">
                    ğŸ’¡ íŒ: Shift+Enterë¡œë„ ì €ì¥ ê°€ëŠ¥, ESCë¡œ ì·¨ì†Œ
                </div>
            `;

        // ë‚´ìš© êµì²´
        contentDiv.parentNode.replaceChild(editContainer, contentDiv);

        // í…ìŠ¤íŠ¸ ì˜ì—­ì— í¬ì»¤ìŠ¤
        const textarea = document.getElementById(`edit-textarea-${noticeId}`);
        textarea.focus();
        textarea.select();

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
        textarea.addEventListener("keydown", (e) => {
          if (e.key === "Enter" && e.shiftKey) {
            e.preventDefault();
            saveEdit(noticeId);
          } else if (e.key === "Escape") {
            e.preventDefault();
            cancelEdit();
          }
        });

        // í¸ì§‘ ì•ˆë‚´ ë©”ì‹œì§€
        setStatus("loading", "í¸ì§‘ ì¤‘: ì €ì¥ ë²„íŠ¼ í´ë¦­ ë˜ëŠ” Shift+Enterë¡œ ì €ì¥");
        log(`âœï¸ í¸ì§‘ ì‹œì‘: ${noticeId}`);
      }

      function editNotice(noticeId) {
        startEdit(noticeId);
      }

      async function saveEdit(noticeId) {
        if (!editingNoticeId) {
          log("âŒ í¸ì§‘ ì¤‘ì¸ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.");
          return;
        }

        const textarea = document.getElementById(`edit-textarea-${noticeId}`);
        if (!textarea) {
          log("âŒ í¸ì§‘ í…ìŠ¤íŠ¸ ì˜ì—­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
          return;
        }

        const newContent = textarea.value.trim();

        if (!newContent) {
          alert("ë‚´ìš©ì€ ë¹„ì›Œë‘˜ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
          textarea.focus();
          return;
        }

        if (newContent === originalContent) {
          log("ğŸ“ ë‚´ìš© ë³€ê²½ ì—†ìŒ, í¸ì§‘ ì·¨ì†Œ");
          cancelEdit();
          return;
        }

        log(`ğŸ’¾ í¸ì§‘ ì €ì¥ ì‹œì‘: ${noticeId}`);
        log(`ğŸ“ ìƒˆ ë‚´ìš©: "${newContent}"`);
        setStatus("loading", "ìˆ˜ì • ë‚´ìš© ì €ì¥ ì¤‘...");

        try {
          const formData = new URLSearchParams();
          formData.append("method", "UPDATE");
          formData.append("id", noticeId);
          formData.append("content", newContent);

          log(
            `ğŸ“¡ UPDATE ìš”ì²­ ì „ì†¡: ID=${noticeId}, Content=${newContent.substring(
              0,
              50
            )}...`
          );

          const response = await fetch(GOOGLE_SCRIPT_URL, {
            method: "POST",
            body: formData,
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
          });

          log(`ğŸ“¡ UPDATE ì‘ë‹µ ìƒíƒœ: ${response.status} ${response.statusText}`);

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }

          const responseText = await response.text();
          log(`ğŸ“„ UPDATE ì‘ë‹µ í…ìŠ¤íŠ¸: ${responseText}`);

          let result;
          try {
            result = JSON.parse(responseText);
          } catch (parseError) {
            log(`âŒ JSON íŒŒì‹± ì‹¤íŒ¨: ${parseError.message}`);
            throw new Error("ì„œë²„ ì‘ë‹µì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + responseText);
          }

          log(`ğŸ“Š UPDATE ê²°ê³¼: ${JSON.stringify(result, null, 2)}`);

          if (result.success) {
            // ë¡œì»¬ ë°ì´í„°ë„ ì—…ë°ì´íŠ¸
            const notice = notices.find((n) => n.id === noticeId);
            if (notice) {
              notice.content = newContent;
              log(`ğŸ“ ë¡œì»¬ ë°ì´í„° ì—…ë°ì´íŠ¸ ì™„ë£Œ`);
            }

            setStatus("success", "ê³µì§€ì‚¬í•­ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!");
            log(`âœ… í¸ì§‘ ì €ì¥ ì™„ë£Œ: ${noticeId}`);

            // í¸ì§‘ ëª¨ë“œ ì¢…ë£Œ
            finishEdit();

            // í™”ë©´ ìƒˆë¡œê³ ì¹¨
            displayNotices();

            // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
            alert("ê³µì§€ì‚¬í•­ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!");
          } else {
            throw new Error(result.error || result.message || "ìˆ˜ì • ì‹¤íŒ¨");
          }
        } catch (error) {
          log(`âŒ í¸ì§‘ ì €ì¥ ì‹¤íŒ¨: ${error.message}`);
          setStatus("error", `ìˆ˜ì • ì‹¤íŒ¨: ${error.message}`);
          alert(`ìˆ˜ì • ì‹¤íŒ¨: ${error.message}`);

          // í¸ì§‘ ëª¨ë“œëŠ” ìœ ì§€í•˜ì—¬ ë‹¤ì‹œ ì‹œë„í•  ìˆ˜ ìˆê²Œ í•¨
        }
      }

      function cancelEdit() {
        if (!editingNoticeId) return;

        log(`âŒ í¸ì§‘ ì·¨ì†Œ: ${editingNoticeId}`);
        finishEdit();
        displayNotices(); // ì›ë˜ ìƒíƒœë¡œ ë³µì›
      }

      function finishEdit() {
        editingNoticeId = null;
        originalContent = "";
        setStatus("success", "í¸ì§‘ ì™„ë£Œ");
      }

      // ==================== ì‚­ì œ ê¸°ëŠ¥ ====================
      async function deleteNotice(noticeId) {
        if (!confirm("ì´ ê³µì§€ì‚¬í•­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
          return;
        }

        log(`ğŸ—‘ï¸ ê³µì§€ì‚¬í•­ ì‚­ì œ ì‹œì‘: ${noticeId}`);
        setStatus("loading", "ì‚­ì œ ì¤‘...");

        try {
          const formData = new URLSearchParams();
          formData.append("method", "DELETE");
          formData.append("id", noticeId);

          const response = await fetch(GOOGLE_SCRIPT_URL, {
            method: "POST",
            body: formData,
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
          });

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }

          const result = await response.json();
          log(`ğŸ“Š ì‚­ì œ ê²°ê³¼: ${JSON.stringify(result, null, 2)}`);

          if (result.success) {
            setStatus("success", "ê³µì§€ì‚¬í•­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!");
            log(`âœ… ì‚­ì œ ì™„ë£Œ: ${noticeId}`);

            // ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ
            setTimeout(loadData, 1000);
          } else {
            throw new Error(result.error || "ì‚­ì œ ì‹¤íŒ¨");
          }
        } catch (error) {
          log(`âŒ ì‚­ì œ ì‹¤íŒ¨: ${error.message}`);
          setStatus("error", `ì‚­ì œ ì‹¤íŒ¨: ${error.message}`);
        }
      }

      // ==================== ê³µì§€ì‚¬í•­ ë“±ë¡ ====================
      async function submitNotice() {
        const department = document.getElementById("department").value;
        const startDate = document.getElementById("startDate").value;
        const content = document.getElementById("content").value.trim();
        const author = document.getElementById("author").value.trim();

        if (!department || !startDate || !content) {
          alert("ì§„ë£Œê³¼, ì‹œì‘ë‚ ì§œ, ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
          return;
        }

        log("ğŸ“ ê³µì§€ì‚¬í•­ ë“±ë¡ ì‹œì‘");
        setStatus("loading", "ê³µì§€ì‚¬í•­ ë“±ë¡ ì¤‘...");

        try {
          const formData = new URLSearchParams();
          formData.append("method", "POST");
          formData.append("department", department);
          formData.append("startDate", startDate);
          formData.append("content", content);
          formData.append("author", author);

          const response = await fetch(GOOGLE_SCRIPT_URL, {
            method: "POST",
            body: formData,
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
          });

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }

          const result = await response.json();
          log(`ğŸ“Š ë“±ë¡ ê²°ê³¼: ${JSON.stringify(result, null, 2)}`);

          if (result.success) {
            setStatus("success", "ê³µì§€ì‚¬í•­ ë“±ë¡ ì„±ê³µ!");

            // í¼ ì´ˆê¸°í™”
            document.getElementById("department").value = "";
            document.getElementById("content").value = "";
            document.getElementById("author").value = "";

            // ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ
            setTimeout(loadData, 1000);
          } else {
            throw new Error(result.error || "ë“±ë¡ ì‹¤íŒ¨");
          }
        } catch (error) {
          log(`âŒ ë“±ë¡ ì‹¤íŒ¨: ${error.message}`);
          setStatus("error", `ë“±ë¡ ì‹¤íŒ¨: ${error.message}`);
        }
      }

      // ==================== ì „ì—­ ì˜¤ë¥˜ ì²˜ë¦¬ ====================
      window.addEventListener("error", function (event) {
        log(`ğŸ’¥ JavaScript ì˜¤ë¥˜: ${event.error}`);
        setStatus("error", "JavaScript ì˜¤ë¥˜ ë°œìƒ");
      });

      window.addEventListener("unhandledrejection", function (event) {
        log(`ğŸ’¥ Promise ì˜¤ë¥˜: ${event.reason}`);
        setStatus("error", "Promise ì˜¤ë¥˜ ë°œìƒ");
      });
    </script>
  </body>
</html>
